(()=>{"use strict";var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var i in n)e.o(n,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:n[i]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.React,n=window.wp.api;var i=e.n(n);const a=window.wp.components,o=window.wp.data,l=window.wp.element,c=window.wp.i18n,s=({selected:e,onLayoutChange:n})=>{const i=cartNotificationsData.imagesUrl+"layout1.svg",a=cartNotificationsData.imagesUrl+"layout2.svg";return(0,t.createElement)("div",{className:"cart-notifications-layouts"},(0,t.createElement)("h4",null,"Layout"),(0,t.createElement)("div",{className:"cart-notifications-frames"},(0,t.createElement)("input",{id:"layout1",type:"radio",name:"layout",checked:"layout1"===e,onChange:()=>n("layout1")}),(0,t.createElement)("label",{htmlFor:"layout1",className:"view-frame"},(0,t.createElement)("img",{src:i,alt:"Layout 1"})),(0,t.createElement)("input",{id:"layout2",type:"radio",name:"layout",checked:"layout2"===e,onChange:()=>n("layout2")}),(0,t.createElement)("label",{htmlFor:"layout2",className:"view-frame"},(0,t.createElement)("img",{src:a,alt:"Layout 2"}))))},r=({selected:e,onPositionChange:n})=>(0,t.createElement)("div",{className:"cart-notifications-btn-group"},(0,t.createElement)("h4",null,"Position"),(0,t.createElement)("div",{className:"cart-notifications-inner-btn"},(0,t.createElement)("input",{id:"top",type:"radio",name:"position",checked:"top"===e,onChange:()=>n("top")}),(0,t.createElement)("label",{htmlFor:"top"},"Top"),(0,t.createElement)("input",{id:"bottom",type:"radio",name:"position",checked:"bottom"===e,onChange:()=>n("bottom")}),(0,t.createElement)("label",{htmlFor:"bottom"},"Bottom"))),d=({sliderValue:e,onSliderChange:n})=>(0,t.createElement)("div",{class:"cart-notifications-slider"},(0,t.createElement)("h4",null,"Close After (Seconds)"),(0,t.createElement)("div",{className:"cart-notifications-slider-inner"},(0,t.createElement)("input",{type:"range",min:"1",max:"10",value:e,className:"slider",id:"notifications-range",onChange:e=>{const t=e.target.value;n(t)}}),(0,t.createElement)("p",{id:"range-value"},e))),m=({conditions:e,initialOptions:n,onConditionChange:i,onAddCondition:a,onRemoveCondition:o})=>{const l=cartNotificationsData.imagesUrl+"del.svg";return(0,t.createElement)("div",{className:"cart-notifications-conditions"},(0,t.createElement)("h4",null,"Display Condition"),e.map(((a,c)=>(0,t.createElement)("div",{key:c,className:"cart-notifications-conditions-inner"},(0,t.createElement)("div",{className:"field"},(0,t.createElement)("select",{value:a,onChange:e=>i(c,e.target.value)},(0,t.createElement)("option",{value:""},"Select Condition"),n.map(((n,i)=>{return(0,t.createElement)("option",{key:i,value:n.value,disabled:0!==c&&(a=n.value,e.includes(a))},n.label);var a}))),(0,t.createElement)("button",{type:"button",onClick:()=>o(c),className:"cart-notifications-delete-condition"},(0,t.createElement)("img",{src:l,alt:"Delete"})))))),(0,t.createElement)("button",{type:"button",onClick:a,className:"add-more-field"},"Add Display Condition"))},u=window.wp.notices,p=()=>{const e=(0,o.useSelect)((e=>e(u.store).getNotices().filter((e=>"snackbar"===e.type))),[]),{removeNotice:n}=(0,o.useDispatch)(u.store);return(0,t.createElement)(a.SnackbarList,{className:"cart-notifications-notices",notices:e,onRemove:n})},g=()=>{const[e,n]=(0,l.useState)({layout:"layout1",position:"top",time:3,conditions:[],isAPILoaded:!1});(0,l.useEffect)((()=>{i().loadPromise.then((()=>{const t=new(i().models.Settings);e.isAPILoaded||t.fetch().then((t=>{n({...e,layout:t.cart_notifications_plugin_layout||u,position:t.cart_notifications_plugin_position||g,time:t.cart_notifications_plugin_slider||v,conditions:t.cart_notifications_plugin_display||_,isAPILoaded:!0})}))}))}),[]);const{layout:u,position:g,time:v,isAPILoaded:E,conditions:_}=e;return E?(0,t.createElement)(l.Fragment,null,(0,t.createElement)("div",{className:"cart-notifications__header"},(0,t.createElement)("div",{className:"cart-notifications__container"},(0,t.createElement)("div",{className:"cart-notifications__title"},(0,t.createElement)("h1",null,(0,c.__)("Cart Notifications Settings","cart-notifications")," ",(0,t.createElement)(a.Icon,{icon:"admin-plugins"}))))),(0,t.createElement)("div",{className:"cart-notifications__main"},(0,t.createElement)(a.Panel,null,(0,t.createElement)(a.PanelBody,{title:(0,c.__)("Make adjustments to cart notification settings","cart-notifications"),icon:"admin-plugins"},(0,t.createElement)(s,{selected:u,onLayoutChange:t=>{n({...e,layout:t})}}),(0,t.createElement)(r,{selected:g,onPositionChange:t=>{n({...e,position:t})}}),(0,t.createElement)(d,{sliderValue:v,onSliderChange:t=>{n({...e,time:t})}}),(0,t.createElement)(m,{conditions:_,initialOptions:[{label:"All pages",value:"all_pages"},{label:"Shop Archive",value:"shop_archive"},{label:"Shop Archive Categories",value:"shop_archive_categories"},{label:"Shop Archive Tags",value:"shop_archive_tags"},{label:"Shop Archive Product Attributes",value:"shop_archive_product_attributes"},{label:"Single Products",value:"single_products"}],onConditionChange:(t,i)=>{if(""!==i){const a=e.conditions.map(((e,n)=>n===t?i:e));n({...e,conditions:a})}},onAddCondition:()=>{n((e=>({...e,conditions:[...e.conditions,""]})))},onRemoveCondition:t=>{const i=e.conditions.filter(((e,n)=>n!==t));n({...e,conditions:i})}})),(0,t.createElement)(a.PanelBody,null,(0,t.createElement)(a.Button,{isPrimary:!0,isLarge:!0,onClick:()=>{new(i().models.Settings)({cart_notifications_plugin_layout:e.layout,cart_notifications_plugin_position:e.position,cart_notifications_plugin_slider:e.time,cart_notifications_plugin_display:e.conditions}).save(),(0,o.dispatch)("core/notices").createNotice("success",(0,c.__)("Settings Saved","wholesome-plugin"),{type:"snackbar",isDismissible:!0})}},(0,c.__)("Save Settings","cart-notifications"))))),(0,t.createElement)("div",{className:"cart-notifications__notices"},(0,t.createElement)(p,null))):(0,t.createElement)(a.Placeholder,null,(0,t.createElement)(a.Spinner,null))};document.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("cart-notifications-settings");e&&(0,l.render)((0,t.createElement)(g,null),e)}))})();